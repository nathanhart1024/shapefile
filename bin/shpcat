#!/usr/bin/env node

var shp = require("../shp");

shp.open(process.argv[2] || "/dev/stdin")
  .then((points) => points.header()
    .then((header) => console.log("header", header))
    .then(function next() { return points.record().then((record) => record && (console.log("record", record), next())); })
    .catch((error) => points.close().then(() => { throw error; }))
    .then(() => (console.log("end"), points.close())))
  .catch((error) => console.error(error.stack));
